### Web API の作り方

part1

- API のデザインパターン
  - rest.odata.soap.graphql.grpc
  - これからあくまでデザインパターンなので、プロトコルと思わない

part2

- api バージョンの使い分け
  - 自分たちだけで利用している場合は気にする必要がない
  - 外部公開している場合は、理想的にはヘッダに含める
  - パスに含める方法が多く、ロードバランサで振り分けが簡単なメリットがある
- エラー時の設計
  - エラーの際には HTML が帰らないようにする
  - 基本的には json を期待していることが想定されるから
  - サービス閉こう時には 503 と retry-after を返す

part3

- openAPI の代表的な要素
  - info オブジェクト
    - api に直接関わらないメタデータを定義
  - path オブジェクト
    - パスの仕様を定義
  - operation オブジェクト
    - http メソッドに関する定義
  - parameter オブジェクト
    - パス、クエリ、ヘッダのパラメータを定義
  - schema オブジェクト
    - リクエストのパラメータを定義
  - components オブジェクトと reference オブジェクト
- 各ユーザー情報を定義
  - server オブジェクト
    - サーバがどこにあるのかを定義

part4

- open API generater でソースコードを自動作成
- prism でモックサーバを起動
- これでフロントはバックを待たずに開発が可能
- バックでは dredd を利用し、実装した API が仕様通りかを確認する

- ### web エンジニアのための DNS 速習講座

part1

- dns の仕組み
  - リゾルバがクライアントから要求をうけ.com や.jp など権威サーバー情報を root サーバに問い合わせる
  - その後その権威サーバに問い合わせるのを繰り返し、目的の ip アドレスをリゾルバが受け取る
  - リゾルバは一定時間その ip アドレスとドメインの組み合わせを保存しておき、もし同じドメインが要求されれば保存しているものをリスポンスする
  - これにより各種権威サーバの負荷を抑える

part2

- ドメイン名の用語
  - 完全修飾ドメイン名
    - ルートラベルまで含めたwww.example.com.のような表記のこと。しかしルートラベルを省略したwww.example.comもそう呼ばれる
  - 相対ドメイン
    - 最後の方から 1 つ以上のラベルを省略したもの
  - ルートドメイン、TLD、SLD
    - ノードの階層の深さごとの呼び名
  - ルートノードはルートドメイン
    - その直下は TLD、その下を SLD
  - サブドメイン
    - 子孫のドメイン

part3

- dns のセキュリティ
  - キャッシュポイズニング
    - クエリを送るときのレスポンスポートを毎回異なる値にする
  - 中間攻撃と経路ハイジャック
    - TLS を使う → 認証局との間も乗っ取られると無力
    - dnssec だと解決
    - しかし、検証されない設定にされていると署名するだけになり意味がなくなる
    - dnssec ではキャッシュ dns サーバと権威 dns サーバとの間は暗号化されない
    - 現在議論中
