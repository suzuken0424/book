### 実践データモデリング

#### part1

- 良いデータモデリングとは

  - モデリング過程でより深く業務分析を行い、顧客やチームとの対話を生むことである

- システム化したいものによって同じ物でも違うモデリングになるため、エンティティを以下の項目ごとに考える必要がある
  - 単一性
    - 何が 1 つのものであるか
  - 同一性
    - 2 つのものが同じである条件
  - カテゴリ
    - それは何であるか。どんな分類で識別されるか

#### part2

- イミュータブルデータモデルとは

  - 事業活動に発生した事実を更新されないように設計すること

- シンプル化とは
  - エンティティの概念を単一にすることを目指すこと
  - シンプル化のルール
    - エンティティに複数の概念、役割、責務が混在しないように分解する
    - エンティティをグルーピングして、1 度に見るべき範囲を狭める

#### part3

1. 仕様から必要だと考えられるエンティティを抽出する
2. エンティティをイベントとリソースに分類する更新日時や作成日時が付くのがイベント
3. イベントには日時属性を 1 つだけ持つようにする
   複数ある場合はイベントが混じっているので、1 つになるように分割する
4. リソースに隠されたイベントを抽出する
   リソースを更新する必要がありそうなら、リソースに更新日時をつけるのではなく、更新イベントとして抽出する
5. 非依存のリレーションシップには交差エンティティで表す
   もし交差エンティティが一つで足りない場合は複数持てせることもできる

#### part4

- 一連のイベントの最新状態を表現する

  - イベントは基本的には事実として、更新はしない
  - しかし、業務の内容によっては長い期間で管理するイベントがある
  - その場合はロングタームイベントパターンが適応できる
  - イベントの細かく分け、１つ 1 つをアクティビティとして抽出する
  - アクティビティを追加していくことで、イベントの時系列を示す

- 過去や未来のデータを表すのに
- 3 つのパターンがある

  - シングル世代テーブルパターン
    - ID と開始日を主キーとする
    - 性能面で不利になることがあるパターン
  - 有効世代ビューパターン
    - 最新のものだけに絞ったエンティティを作成する
    - 最新の情報だけが必要な場合に有効
  - 世代バージョンタグ付けパターン
    - Git と同じ仕組み
    - 全ての世代のデータを持っておき、バージョンやタグで必要なものを指し示す
    - 乱用すると複雑なクエリになってしまう
  - アンチパターン
    - 削除フラグによる世代管理
    - 削除フラグをクエリから漏らしやすいので、注意する必要がある
    - 同じことをしたいなら、サブタイプとして表現した方が良い

- サブタイプを実装

  - 単一テーブル継承パターン
    - スーパータイプとサブタイプが同じテーブルに
    - 区分をしめすカラムを持っておく
  - 具象テーブル継承パターン
    - サブタイプごとにテーブルを作るパターン
  - クラステーブル継承パターン
    - スーパータイプ、サブタイプごとに対応したテーブルを作る

#### part5

- ドメインモデルでもすることは同様
- 1 つのクラスには 1 つの概念を表すようにする
- そうすることで、修正などにも柔軟に対応できる

### 今から始める Flutter

- android studio を用いてプロジェクトを作成し、dart を用いて開発をする

- dart はオブジェクト指向言語であり、継承や多重継承に似た機能も利用できる

- statelessWidget
- 状態をもたない
- build メソッドをオーバーライドし、１つ以上の widget を組み合わせて UI を構成する
- 自身で表示更新する仕組みがない

- statefulWidget
- state を生成する
- statelessWidget にあった build メソッドは state で実装する
- 状態を変化させるときは、setState の引数コールバック内で行う
- setState を呼び出すと自身の表示更新が行われる

- riverpod
- ref が使えるので状態管理がまとまり、状態管理がしやすい

### 作って学ぶ Web3

- まずは ethereum のアカウント作成
- ethereum では本当にお金がかかるメインネットと開発用のテスト環境がある
- そのためアプリの開発はテスト環境に繋いで行う
- テスト環境への接続はウォレットからできる

- スマートコントラクトは solidty で記述することができる
- remix
- solidty のスマートコントラクトの作成、テスト、実行、デプロイができる web ide

- open zeppelin
- スマートコントラクトの実装を簡単にしてくれる solidty のフレームワーク
- フルスクラッチすることもできるが、スマートコントラクトはデプロイすると基本的には変更できないので、使うことをおすすめする
